import{g as J,p as K,a as Q,u as X,c as r,n as Y,b as W,m as Z,d as se,e as ne,f as ie,h as re,i as oe,j as le,k as ce,l as de,o as ue,q as me,r as ge,t as F,s,V as ve,v as pe,w as fe,x as he,y as _e,z as ye,A as be,B as xe,C as we,D as ke,E as ze,I as Pe,F as Se,G as ee,H as w,J as x,L as Ce,K as E,M as D,N as p,O as o,P as h,Q as g,R as l,S as Ve,T as A,U as Be,_ as Le,W as Ee,X as De,Y as Ae,Z as c,$ as Te,a0 as $e,a1 as Ue,a2 as Ie,a3 as n,a4 as Re,a5 as j,a6 as Me,a7 as Ne,a8 as H,a9 as b,aa as Oe,ab as We,ac as qe,ad as Fe,ae as je,af as He,ag as Ge,ah as Je,ai as Ke}from"./_unfonts-DtUc4XXU.js";import{P as Qe,_ as Xe}from"./AppMessage-Bpmcsea7.js";import{V as Ye,a as Ze,b as M,_ as N,c as O}from"./CardTitle-C2fo48rR.js";import{_ as ea,a as aa}from"./PrivacyHighlight-BdIP1Yhp.js";import{_ as G}from"./ShareUrl-B46niZAp.js";import"./VTextField-C5ZRspUF.js";import"./VDialog-bKjCavjK.js";const ta=K({color:String,density:String,...Z()},"VBannerActions"),sa=J()({name:"VBannerActions",props:ta(),setup(a,u){let{slots:m}=u;return Q({VBtn:{color:a.color,density:a.density,slim:!0,variant:"text"}}),X(()=>r("div",{class:W(["v-banner-actions",a.class]),style:Y(a.style)},[m.default?.()])),{}}}),ae=se("v-banner-text"),na=K({avatar:String,bgColor:String,color:String,icon:Pe,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ze(),...Z(),...ke(),...we(),...xe({mobile:null}),...be(),...ye(),..._e(),...he(),...fe(),...pe()},"VBanner"),ia=J()({name:"VBanner",props:na(),setup(a,u){let{slots:m}=u;const{backgroundColorClasses:_,backgroundColorStyles:t}=ne(()=>a.bgColor),{borderClasses:k}=ie(a),{densityClasses:P}=re(a),{displayClasses:f,mobile:y}=oe(a),{dimensionStyles:z}=le(a),{elevationClasses:S}=ce(a),{locationStyles:C}=de(a),{positionClasses:$}=ue(a),{roundedClasses:U}=me(a),{themeClasses:V}=ge(a),B=F(()=>a.color),L=F(()=>a.density);Q({VBannerActions:{color:B,density:L}}),X(()=>{const I=!!(a.text||m.text),T=!!(a.avatar||a.icon),R=!!(T||m.prepend);return s(a.tag,{class:W(["v-banner",{"v-banner--stacked":a.stacked||y.value,"v-banner--sticky":a.sticky,[`v-banner--${a.lines}-line`]:!!a.lines},V.value,_.value,k.value,P.value,f.value,S.value,$.value,U.value,a.class]),style:Y([t.value,z.value,C.value,a.style]),role:"banner"},{default:()=>[R&&r("div",{key:"prepend",class:"v-banner__prepend"},[m.prepend?s(ve,{key:"prepend-defaults",disabled:!T,defaults:{VAvatar:{color:B.value,density:L.value,icon:a.icon,image:a.avatar}}},m.prepend):s(Ye,{key:"prepend-avatar",color:B.value,density:L.value,icon:a.icon,image:a.avatar},null)]),r("div",{class:"v-banner__content"},[I&&s(ae,{key:"text"},{default:()=>[m.text?.()??a.text]}),m.default?.()]),m.actions&&s(sa,{key:"actions"},m.actions)]})})}}),ra={key:0,class:"mt-3"},oa=Se({__name:"DetectedLocaleBanner",setup(a){const u=ee(),m=w(u),_=w(!1);let t=!0;try{localStorage.getItem("locale")&&(t=!1)}catch{}const k=w(t),P=x(()=>Ce[m.value]||m.value);async function f(){await Be(m.value),k.value=!1}function y(){_.value=!_.value}return(z,S)=>k.value?(p(),E(ia,{key:0,class:"my-2",color:"success",elevation:"10",icon:"mdi-earth",lines:"one"},{actions:o(()=>[s(A,{variant:"flat",class:"mx-2",onClick:f},{default:o(()=>[g(l(z.$t("use")),1)]),_:1}),s(A,{variant:"tonal",onClick:y},{default:o(()=>[g(l(z.$t("change")),1)]),_:1})]),default:o(()=>[s(ae,null,{default:o(()=>[g(l(P.value),1)]),_:1}),_.value?(p(),h("div",ra,[s(Ve)])):D("",!0)]),_:1})):D("",!0)}}),la={class:"ml-4 mb-4"},ca={class:"d-flex mb-3"},da={class:"text-body-2"},ua={class:"d-flex mb-3"},ma={class:"text-body-2"},ga={class:"d-flex"},va={class:"text-body-2"},pa={key:0},fa={class:"ma-2"},ha={key:0},_a={key:0},ya={key:0,class:"mx-6 mt-2 font-italic text-high-emphasis"},ba={class:"text-warning"},xa={key:1,class:"mx-6 mt-2 font-italic"},wa={key:1},ka={class:"mx-6 mt-2 font-italic text-primary text-center"},za={key:0},Pa={key:1},Sa={key:2},Ca={class:"mx-2 mb-2"},Va={class:"text-center mb-4"},Ba={class:"text-h6"},La={class:"ml-2 mb-2"},Ea={class:"d-flex align-center mb-3"},Da={class:"text-body-2"},Aa={class:"d-flex align-center mb-3"},Ta={class:"text-body-2"},$a={class:"d-flex align-center mb-3"},Ua={class:"text-body-2"},Ia={class:"d-flex align-center mb-3"},Ra={class:"text-body-2"},Ma={class:"d-flex align-center"},Na={class:"text-body-2"},Oa={class:"mx-2 mb-2"},Wa={__name:"organizer",setup(a){const u=w([]),m=w([]),_=w(!1),{t}=Ee();console.log(`APP STARTED: ${window.location.href} HTML ${window.document.title}`),De(),Ae(),c.value?.pairings&&(m.value=Object.keys(c.value.pairings).map(i=>({name:i})));const k=w(null),P=new URLSearchParams(window.location.search);Te(()=>{const i=P.get("errorT"),e=P.get("errorM");(e||i)&&k.value.showMessage(i,e,"error")});const f=w(""),y=w(""),z=x(()=>{if(c.value.createdExchangeId){const i=new URL(window.location.href);return i.pathname="/participant.html",i.searchParams.set("role","participant"),i.searchParams.set("id",c.value.createdExchangeId),i.toString()}return null}),S=x(()=>{if(c.value.pairings&&c.value.createdExchangeId){const i=new URL(window.location.href);return i.pathname="/pairings.html",i.searchParams.delete("role"),i.searchParams.set("pairings",$e(c.value.pairings)),i.searchParams.set("id",c.value.createdExchangeId),i.toString()}return null}),C=x(()=>t("organizer-exchange-title",{organizer:Ue.value})),$=x(()=>t("organizer-share-invite-title",{exchange:C.value})),U=x(()=>t("organizer-drawing-share-title",{exchange:C.value})),V=x(()=>{const i=m.value.map(v=>v.name.toLowerCase()).sort(),e=u.value.map(v=>v.name.toLowerCase()).sort();if(i.length!==e.length)return!0;for(const[v,d]of i.entries())if(d!==e[v])return!0;return!1}),B=x(()=>!c.value?.pairings||V.value),L=x(()=>!!c.value?.pairings&&!V.value);Ie(u,()=>{let i=!1;for(const e of c.value.participants)u.value.some(v=>v.name.toLowerCase()===e.name.toLowerCase())?e.isExcluded&&(delete e.isExcluded,i=!0):(e.isExcluded=!0,i=!0);i&&j()});function I(i){const e=[...i].sort(()=>Math.random()-.5),v={};for(let d=0;d<e.length;d++){const q=e[d],te=e[(d+1)%e.length];v[q.name]={receiver:te.name,secretWord:q.secretWord}}c.value.pairings=v,m.value=i.map(d=>({name:d.name})),c.value.firstDrawing&&(c.value.firstDrawing=!1),j()}function T(i){if(!i?.name){console.warn("Participant private URL requested without a valid name",i);return}const e=c.value?.pairings,v=e&&e[i.name]?.receiver?e[i.name].receiver:void 0,d=We(i.name,v);console.log("Participant private URL requested for",i.name,d,v),window.location.href=d}function R(){qe(),Fe(f.value,y.value,!0)?(je(f.value),He({name:f.value,secretWord:y.value}),window.location.href=`${window.location.pathname}?role=organizer&id=${c.value.createdExchangeId}`):k.value.showMessage(t("organizer-errors-create-title"),t("organizer-errors-create-message"),"error")}return(i,e)=>{const v=Qe;return p(),E(Re,{class:W({"organizer-initial":!_.value&&!n(H)})},{default:o(()=>[s(Me,null,{default:o(()=>[s(Ze,{class:"pa-4",fluid:"","max-width":n(Ne)},{default:o(()=>[s(oa),n(H)?(p(),E(M,{key:0,elevation:"4",class:"transparent-card"},{default:o(()=>[s(N,{title:C.value},null,8,["title"]),r("div",la,[r("div",ca,[s(b,{class:"mr-3",color:"info",size:"24",style:{"min-width":"24px"}},{default:o(()=>[...e[5]||(e[5]=[g("mdi-share-variant",-1)])]),_:1}),r("span",da,l(n(t)("organizer-invite-instructions-share")),1)]),r("div",ua,[s(b,{class:"mr-3",color:"warning",size:"24",style:{"min-width":"24px"}},{default:o(()=>[...e[6]||(e[6]=[g("mdi-message-reply",-1)])]),_:1}),r("span",ma,l(n(t)("organizer-invite-instructions-friends-reply")),1)]),r("div",ga,[s(b,{class:"mr-3",color:"success",size:"24",style:{"min-width":"24px"}},{default:o(()=>[...e[7]||(e[7]=[g("mdi-account-plus",-1)])]),_:1}),r("span",va,l(n(t)("organizer-invite-instructions-open-replies")),1)])]),s(O,null,{default:o(()=>[z.value?(p(),h("div",pa,[s(G,{"copy-label":n(t)("organizer-share-invite-copy-label"),"share-label":n(t)("organizer-share-invite-share-label"),title:$.value,url:z.value},null,8,["copy-label","share-label","title","url"])])):D("",!0),r("div",null,[s(v,{"selected-participants":u.value,"onUpdate:selectedParticipants":e[1]||(e[1]=d=>u.value=d),class:"mt-4","include-actions":"",editable:B.value,"participant-action-button-visible":L.value,participants:n(c).participants,title:n(t)("organizer-participant-list-title"),onParticipantAction:T},{actions:o(()=>[r("div",fa,[u.value.length>=3?(p(),h("div",ha,[V.value?(p(),h("div",_a,[s(A,{block:"",color:n(c).firstDrawing?"secondary":"warning","data-testid":"draw-results-button",size:"large",onClick:e[0]||(e[0]=d=>I(u.value))},{append:o(()=>[s(b,{size:"x-large"},{default:o(()=>[...e[8]||(e[8]=[g("mdi-sack",-1)])]),_:1})]),default:o(()=>[g(l(n(c).firstDrawing?n(t)("organizer-drawing-first-draw-button"):n(t)("organizer-drawing-redraw-button"))+" ",1)]),_:1},8,["color"]),n(c).firstDrawing?(p(),h("div",xa,[r("p",null,l(n(t)("organizer-drawing-first-draw-body")),1)])):(p(),h("div",ya,[r("p",null,[r("strong",ba,l(n(t)("organizer-drawing-attention-title")),1),g(" "+l(n(t)("organizer-drawing-attention-body")),1)])]))])):S.value?(p(),h("div",wa,[s(G,{"copy-label":n(t)("organizer-drawing-share-copy-label"),"share-label":n(t)("organizer-drawing-share-label"),title:U.value,url:S.value},null,8,["copy-label","share-label","title","url"]),r("div",ka,[r("p",null,l(n(t)("organizer-drawing-share-reminder")),1)])])):D("",!0)])):D("",!0)])]),message:o(()=>[u.value.length===0?(p(),h("p",za,l(n(t)("organizer-participant-list-empty")),1)):u.value.length<3?(p(),h("p",Pa,l(n(t)("organizer-participant-list-needs-three")),1)):(p(),h("p",Sa,l(n(t)("organizer-participant-list-accepted")),1))]),_:1},8,["selected-participants","editable","participant-action-button-visible","participants","title"])])]),_:1})]),_:1})):_.value?(p(),E(M,{key:1,elevation:"4"},{default:o(()=>[s(N,{title:n(t)("organizer-create-exchange-title")},null,8,["title"]),s(O,null,{default:o(()=>[s(ea,{"participant-name":f.value,"onUpdate:participantName":e[2]||(e[2]=d=>f.value=d),"participant-secret":y.value,"onUpdate:participantSecret":e[3]||(e[3]=d=>y.value=d),supresstitle:""},{actions:o(()=>[r("div",Ca,[s(A,{block:"",color:"primary","data-testid":"create-exchange-button",disabled:!f.value||!y.value,size:"large",onClick:R},{default:o(()=>[g(l(n(t)("organizer-create-exchange-button")),1)]),_:1},8,["disabled"])])]),_:1},8,["participant-name","participant-secret"])]),_:1})]),_:1})):(p(),E(M,{key:2,elevation:"4"},{default:o(()=>[s(N,{title:n(t)("organizer-default-page-headline"),class:"mb-4"},null,8,["title"]),s(O,null,{default:o(()=>[r("div",Va,[r("h3",Ba,l(n(t)("organizer-default-page-prompt")),1)]),r("div",La,[r("div",Ea,[s(b,{class:"mr-3",color:"success",size:"24"},{default:o(()=>[...e[9]||(e[9]=[g("mdi-account-edit",-1)])]),_:1}),r("span",Da,l(n(t)("organizer-default-page-steps-create-chat")),1)]),r("div",Aa,[s(b,{class:"mr-3",color:"info",size:"24"},{default:o(()=>[...e[10]||(e[10]=[g("mdi-share-variant",-1)])]),_:1}),r("span",Ta,l(n(t)("organizer-default-page-steps-share-invite")),1)]),r("div",$a,[s(b,{class:"mr-3",color:"warning",size:"24"},{default:o(()=>[...e[11]||(e[11]=[g("mdi-account-multiple-check",-1)])]),_:1}),r("span",Ua,l(n(t)("organizer-default-page-steps-confirm-friends")),1)]),r("div",Ia,[s(b,{class:"mr-3",color:"purple",size:"24"},{default:o(()=>[...e[12]||(e[12]=[g("mdi-shuffle-variant",-1)])]),_:1}),r("span",Ra,l(n(t)("organizer-default-page-steps-draw-pairs")),1)]),r("div",Ma,[s(b,{class:"mr-3",color:"black",size:"24"},{default:o(()=>[...e[13]||(e[13]=[g("mdi-domino-mask",-1)])]),_:1}),r("span",Na,l(n(t)("organizer-default-page-steps-keep-secret")),1)])]),s(aa,{class:"mt-8"})]),_:1}),r("div",Oa,[s(A,{variant:"flat",color:"primary",block:"",size:"large","data-testid":"organize-exchange-button",onClick:e[4]||(e[4]=d=>_.value=!0)},{default:o(()=>[g(l(n(t)("organizer-default-page-organize-button")),1)]),_:1})])]),_:1})),s(Oe,{class:"mt-4"}),s(Xe,{ref_key:"messagePlaceholder",ref:k},null,512)]),_:1},8,["max-width"])]),_:1})]),_:1},8,["class"])}}},qa=Le(Wa,[["__scopeId","data-v-90f181e6"]]);async function Fa(){const a=Ge(qa);Je(a);const u=ee();await Ke(u);try{typeof document<"u"&&document.documentElement&&(document.documentElement.lang=u)}catch{}a.mount("#app")}Fa();
